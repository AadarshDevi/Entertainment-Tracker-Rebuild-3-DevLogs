# Day 2, Jan 01, 2025

NOTE: No code is being written unless said so.

## Backend and Database

### Data Class Storage
The way to store data via record Entertainment

```java
record Entertainment (
    int id,
    String name,
    EntertainmentType type,
	LocalDate date,

	EntertainmentStatus status,
    boolean isSpecial,
    boolean isPilot,
    boolean isFavorite,

	String[] tags,
    
    int seasonId,
    int episodeNum,
    int duration
) {}
```
Yesterday we made the db that stores all the data. Now we need to represent
them. First of, we have the main data storage `record Entertainment` and then
we have the smaller Entertainment, `record VisualEntertainment`. This will
be used to get data from db for the ui.
```java
record VisualEntertainment (
    int id,
    String name,

	EntertainmentStatus status,
    boolean isFavorite
) {}
```
So, we have `id` for getting info from db, `name` to put in the ui, status for
the visual representation of it and `isFavorite` for the star for favorite.

We will now see `EntertainmentType` and `EntertainmentStatus`

```java
enum EntertainmentType {
	MOVIE,
	SHOW,
	EPISODE
}

enum EntertainmentStatus {
	COMPLETED,
    RELEASED,
    UPCOMING,
    ONGOING,
    UNKNOWN
}
```

### Getting Data from DB
So, the best way i know is have the same method 3 times.
1. Api.getEntertainment(id)
2. Backend.getEntertainment(id)
3. Database.getEntertainment(id)

Before crying for making ui, we can replace it with the cli.

```
Database <--> Backend <--> Api <--> UI
                               <--> CLI
```

Next is the folder structure so different versions of the app can be used.

```
|--- src
|   |--- main
|   |   |--- java
|   |   |   |--- Launcher (Launches Main.java extends javafx Application)
|   |   |   |--- data
|   |   |   |   |--- record Entertainment
|   |   |   |   |--- record VisualEntertainment
|   |   |   |--- database
|   |   |   |   |--- v1
|   |   |   |   |   |--- Manager // Connect/Disconnect to SQLiteDB
|   |   |   |   |   |--- Querier // SQLite Statements
|   |   |   |--- backend
|   |   |   |   |--- v1
|   |   |   |   |   |--- Backend // Data Processing
|   |   |   |--- api
|   |   |   |   |--- v1
|   |   |   |--- ui
|   |   |   |   |--- important
|   |   |   |   |   |--- v1
|   |   |   |   |   |   |--- Main
|   |   |   |   |   |   |--- MainFrameController
|   |   |   |   |--- module
|   |   |   |   |   |--- v1
|   |   |   |   |   |   |--- ModuleController (Parent)
|   |   |   |   |   |   |--- MovieModuleController (Child)
|   |   |   |   |   |   |--- ShowModuleController (Child)
|   |   |   |   |   |   |--- EpisodeModuleController (Child)
|   |   |   |   |--- viewer
|   |   |   |   |   |--- v1
|   |   |   |   |   |   |--- ViewerController (Parent)
|   |   |   |   |   |   |--- MovieViewerController (Child)
|   |   |   |   |   |   |--- ShowViewerController (Child)
|   |   |   |   |   |   |--- EpisodeViewerController (Child)
|   |   |   |   |--- editor
|   |   |   |   |   |--- v1
|   |   |   |   |   |   |--- EditorController (Parent)
|   |   |   |   |   |   |--- MovieEditorController (Child)
|   |   |   |   |   |   |--- ShowEditorController (Child)
|   |   |   |   |   |   |--- EpisodeEditorController (Child)
|   |   |   |--- cli
|   |   |   |   |--- v1
|   |   |   |   |    |--- CLI // takes input and makes sure it is valid
|   |   |   |--- module-info.java
|   |   |--- resources
|   |   |   |--- ui
|   |   |   |   |--- fxml
|   |   |   |   |   |--- v1
|   |   |   |   |   |   |--- MainFrame
|   |   |   |   |   |   |--- module
|   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |--- MovieModule
|   |   |   |   |   |   |   |   |--- ShowModule
|   |   |   |   |   |   |   |   |--- EpisodeModule
|   |   |   |   |   |   |--- viewer
|   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |--- MovieViewer
|   |   |   |   |   |   |   |   |--- ShowViewer
|   |   |   |   |   |   |   |   |--- EpisodeViewer
|   |   |   |   |   |   |--- editor
|   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |--- MovieEditor
|   |   |   |   |   |   |   |   |--- ShowEditor
|   |   |   |   |   |   |   |   |--- EpisodeEditor
|   |   |   |   |--- css
|   |   |   |   |   |--- v1
|--- somewhere in User/AppData/local
|   |--- EntertainmentTracker
|   |   |--- database
|   |   |   |--- etdb_1.sqlite (becomes below)
|   |   |   |--- entertainmenttracker.db (new database by moving data)
|   |   |--- configs
|   |   |   |--- entertainmenttracker.settings
|   |   |   |--- entertainmenttracker.preferences (maybe merged with above)
```
With a somewhat good folder structure, next is the ways to get information.
1. We get information of VisualEntertainment for the modules.
2. We get information of Entertainment for viewers.
3. We get a string to search the name and tags of the entertainment

For writing apis, there are the http methods. To make easier for myself, I will be
renaming them.

|  HTTP  |  Mine   |
|:------:|:-------:|
|  get   |   get   |
|  post  |   add   |
|  put   | replace |
| delete | delete  |
| patch  | update  |

Now we will write get commands for them.
1. Get/Get Methods
   1. entertainment with { id }
       ```cmd
       get -etid { id }
       ```
   
   2. entertainment list/array that contains { string }
       ```cmd
       get -etid -s "string string string"
       ``` 
   
   3. visual entertainment with { id }
       ```cmd
       get -etid -v { id }
       ``` 
   
   4. visual entertainment list/array that contains { string }
       ```cmd
       get -etid -vs "string string"
       ```

    Underneath, visual entertainment is a partial Entertainment:
    - VisualEntertainment(int id, String name, EntertainmentStatus status, boolean isFavorite)
    - VisualEntertainment(Entertainment entertainment)

Other than writing commands, we need to find a way to get data in sets of
50, excluding episodes

- Database: etdb_1.sqlite
- Table: entertainment_table

```
// all the data rows
select * from entertainment_table;

// rows in a set range of ids
// vars: maxVal, minVal
select *
from entertainment_table
where
minVal <= id and id <= maxVal
;
```
