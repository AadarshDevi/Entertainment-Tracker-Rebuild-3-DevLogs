# Day 8 - 13, Jan 08, 2025 - Jan 13, 2025

Yesterday We did a lot of css. But now, we will use the database. So we will be
writing the http methods. From a previous day's devlog we have the methods.

|  HTTP  |  Mine   | Completion |  
|:------:|:-------:|:----------:|
|  get   |   get   | completed  |
|  post  | create  | completed  |
|  put   | replace |            |
| delete | delete  | completed  |
| patch  | update  |            |

## HTTP Method: Get

We get visual entertainment and entertainment. For entertainment, we use id and
text. and for visual entertainment it is the same. we already have the methods
for getting the data.

1. entertainment via id: `get -etid { id }`
2. entertainment via string: `get -etid -s "string string string"`
3. visual entertainment via id: `get -etid -v { id }`
4. visual entertainment via string: `get -etid -vs "string string"`

I will be writing code in the actual project repo.

## FileSystem Update

First is my personal FileSystem library and update File Structure. (Old: Check [Jan 03, 2026](/jan/jan-03-2026.md))

```
|--- lib
|   |--- JFileSystem.jar (Custom Lib)
|--- src
|   |--- main
|   |   |--- java
|   |   |   |--- com.aadarsh.etr3
|   |   |   |   |--- Launcher (Launches Main.java extends javafx Application)
|   |   |   |   |--- backend
|   |   |   |   |   |--- data
|   |   |   |   |   |   |--- record Entertainment
|   |   |   |   |   |   |--- record VisualEntertainment
|   |   |   |   |   |--- database
|   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |--- Manager (Connect/Disconnect to SQLiteDB)
|   |   |   |   |   |   |   |--- QuerierQuerierQuerier (SQLite Statements)
|   |   |   |   |   |--- v1
|   |   |   |   |   |   |--- Backend (Data Processing)
|   |   |   |   |   |   |--- InternalConfig (Data Processing)
|   |   |   |   |--- api
|   |   |   |   |   |--- v1
|   |   |   |   |   |   |--- Api
|   |   |   |   |--- cli
|   |   |   |   |   |--- v1
|   |   |   |   |   |    |--- CLI (takes input and makes sure it is valid)
|   |   |   |   |--- module-info.java
|   |   |   |   |--- ui
|   |   |   |   |   |--- v1
|   |   |   |   |   |   |--- Main
|   |   |   |   |   |   |--- custom
|   |   |   |   |   |   |--- controllers
|   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |--- MainFrameController
|   |   |   |   |   |   |   |--- module
|   |   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |   |--- ModuleController (Parent)
|   |   |   |   |   |   |   |   |   |--- MovieModuleController (Child)
|   |   |   |   |   |   |   |   |   |--- ShowModuleController (Child)
|   |   |   |   |   |   |   |   |   |--- EpisodeModuleController (Child)
|   |   |   |   |   |   |   |--- viewer
|   |   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |   |--- ViewerController (Parent)
|   |   |   |   |   |   |   |   |   |--- MovieViewerController (Child)
|   |   |   |   |   |   |   |   |   |--- ShowViewerController (Child)
|   |   |   |   |   |   |   |   |   |--- EpisodeViewerController (Child)
|   |   |   |   |   |   |   |--- editor
|   |   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |   |--- EditorController (Parent)
|   |   |   |   |   |   |   |   |   |--- MovieEditorController (Child)
|   |   |   |   |   |   |   |   |   |--- ShowEditorController (Child)
|   |   |   |   |   |   |   |   |   |--- EpisodeEditorController (Child)
|   |   |--- resources
|   |   |   |--- log4j2.xml
|   |   |   |--- com.aadarsh.etr3
|   |   |   |   |--- internal
|   |   |   |   |   |--- configs
|   |   |   |   |   |   |--- entertainmenttracker.configs
|   |   |   |   |--- ui
|   |   |   |   |   |--- fxml
|   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |--- MainFrame
|   |   |   |   |   |   |   |--- module
|   |   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |   |--- MovieModule
|   |   |   |   |   |   |   |   |   |--- ShowModule
|   |   |   |   |   |   |   |   |   |--- EpisodeModule
|   |   |   |   |   |   |   |--- viewer
|   |   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |   |--- MovieViewer
|   |   |   |   |   |   |   |   |   |--- ShowViewer
|   |   |   |   |   |   |   |   |   |--- EpisodeViewer
|   |   |   |   |   |   |   |--- editor
|   |   |   |   |   |   |   |   |--- v1
|   |   |   |   |   |   |   |   |   |--- MovieEditor
|   |   |   |   |   |   |   |   |   |--- ShowEditor
|   |   |   |   |   |   |   |   |   |--- EpisodeEditor
|   |   |   |   |   |--- css
|   |   |   |   |   |   |--- v1
|--- somewhere in User/AppData/local
|   |--- EntertainmentTracker
|   |   |--- { Enter Version Number }
|   |   |   |--- database
|   |   |   |   |--- etdb_1.sqlite (becomes below)
|   |   |   |   |--- database.entertainmenttracker.sqlite (new database by moving data)
|   |   |   |--- configs
|   |   |   |   |--- entertainmenttracker.settings
|   |   |   |   |--- entertainmenttracker.preferences (maybe merged with above)
|   |   |   |   |--- entertainmenttracker.themes (maybe)
|   |   |   |--- themes (Needs Testing)
|   |   |   |   |--- test.theme.entertainmenttracker.css
|   |   |   |   |--- light.theme.entertainmenttracker.css
|   |   |   |   |--- dark.theme.entertainmenttracker.css
```

The package `com.aadarsh.etr3.ui.v1.custom` will contain custom classes like SVGButton (Like
SVGLabelButton).

## Database Connection

Duplicated database and renamed it as `database.entertainmenttracker.sqlite` from
`etdb_1.sqlite` (1 in [Sources](#SourcesResources)). Connect to database. I forgot
to add the `jdbs:sqlite` to the filepath (5 in [Sources](#SourcesResources)).
```java
private final Connection connection = DriverManager.getConnection("jdbc:sqlite:" + databasePath);
```

## Logging via Log4J Core and Log4J API

Logging in the app is really useful for app, not when coding. So when coding,
`System.out.println()` or `System.exit.println()` will be used heavily. When
deploying the app, **Log4J Core** will be used to hold logs.
(2 in [Sources](#SourcesResources)).

# The Problem
While trying to fix Log4J, the project broke. maven and intellij broke the project
so, I had to remake the project :(

Now the project is **_Entertainment Tracker Rebuild 4_**.

## Fixing Log4J Logging

Only Errors and Fatal were being printed. so now I needed to config Log4J. Use
Telusko's Video on Log4J (7 in [Sources](#SourcesResources)).

And after long time I found the fix. I had `log4j2.xml` in the wrong folder.
- wrong: `src/main/resources/com/aadarsh/etr3/log4j2.xml`
- correct: `src/main/resources/log4j2.xml`

Now I can print all logs and write from info up to fatal logs.

## Fixing Database Driver

I have this exception: `java.sql.SQLException: No suitable driver found for jdbc:sqlite:D:\Programming\Java\Projects\Entertainment_Tracker\database.entertainmenttracker.sqlite`

I had the wrong dependency for sqlite.

Correct:
```xml
<!-- https://mvnrepository.com/artifact/com.mysql/mysql-connector-j -->
      <dependency>
          <groupId>com.mysql</groupId>
          <artifactId>mysql-connector-j</artifactId>
          <version>9.5.0</version>
      </dependency>
```

Wrong:
```xml
<!-- https://mvnrepository.com/artifact/org.xerial/sqlite-jdbc -->
<dependency>
    <groupId>org.xerial</groupId>
    <artifactId>sqlite-jdbc</artifactId>
    <version>3.51.1.0</version>
</dependency>
```

## Package: Backend

We have a main class `Backend`, `DataBaseManager` and, `DataBaseQuerier` for DataBase
management. And many supporting classes: `InternalConfig` with exceptions
`EntertainmentNotFoundException`.

## HTTP Methods

1. GET
   1. `getEntertainment(id: int) -> Entertainment`: 
   2. `getVisualEntertainment(id: int) -> VisualEntertainment`: 
   3. `getEntertainments(text: String) -> Entertainment[]`: 
   4. `getVisualEntertainments(text: String) -> VisualEntertainment[]`: 
   5. `getEntertainments(min: int, max: int) -> Entertainment[]`: 
   6. `getVisualEntertainments(min: int, max: int) -> VisualEntertainment[]`: 
   7. Helper Methods
      1. `getEntertainment(resultSet: ResultSet) -> Entertainment`: 
      2. `getEntertainments(resultSet: ResultSet) -> Entertainment[]`: 
2. POST
   1. `createEntertainment(entertainment: Entertainment) -> boolean`: 
3. DELETE
   1. `deleteEntertainment(id: int) -> boolean`: 
4. PUT
   1. `replaceEntertainment(entertainment: Entertainment) -> boolean`:
5. PATCH

    Implementing patch is taking a long time. I had to do this for every field and,
    it is taking a long time.

   1. `updateEntertainment(entertainment: Entertainment) -> boolean`:
   2. `updateTag(id: int, tagNum: int, updatedTag: String) -> void`:

The only new http methods are for the advanced search tab.

## Uncategorizable Important Info

With these http methods done, most of the backend is completed. Now to play with
the UI.

While testing http put and patch, http post was having null values for the tags.
Updated code to have default values to be "" (Empty String).

## Sources/Resources
1. [Does it matter what extension is used for SQLite database files?](https://stackoverflow.com/questions/808499/does-it-matter-what-extension-is-used-for-sqlite-database-files) from Stack Overflow
2. [How can I get started with Log4j?](https://logging.apache.org/log4j/2.x/manual/getting-started.html) from Log4J
3. [A Guide to System.exit()](https://www.baeldung.com/java-system-exit) from Baeldung
4. [How to return enum value in java](https://stackoverflow.com/questions/31849497/how-to-return-enum-value-in-java) from Stack Overflow
5. [SQLite Java: Connect to a SQLite Database](https://www.sqlitetutorial.net/sqlite-java/sqlite-jdbc-driver/) from SQLite Tutorial
6. [Apache Log4j](https://www.geeksforgeeks.org/java/apache-log4j/) from GeeksForGeeks
7. [Logging in Java using Log4J](https://www.youtube.com/watch?v=2IVyyo3DA7U&t=146s) by Telusko
8. [Converting a String to an Enum in Java](https://www.geeksforgeeks.org/java/converting-a-string-to-an-enum-in-java/) from GeeksForGeeks
9. [SQL EXISTS Operator](https://www.w3schools.com/sql/sql_exists.asp) from W3Schools
10. [How to use SQLite DB Browser for Efficient Database Management](https://www.w3resource.com/sqlite/snippets/sqlite-db-browser-guide.php) (Run SQL Statements in DB Browser) from W3Resources
11. [SQL Query to Match Any Part of String](https://www.geeksforgeeks.org/sql/sql-query-to-match-any-part-of-string/) from GeeksForGeeks
12. [SQL INSERT INTO Statement](https://www.w3schools.com/sql/sql_insert.asp) from W3Schools
13. [SQL UPDATE Statement](https://www.w3schools.com/SQL/sql_update.asp) from W3Schools
14. [SQL DELETE Statement](https://www.w3schools.com/SQL/sql_delete.asp) from W3Schools